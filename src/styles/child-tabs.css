/* CHILD TABS - Tabs hijas (diffs, comparisons) adjuntas a un parent */

/* TAB BLOCK WRAPPER */
/* Contenedor que agrupa una tab padre con sus child tabs.
   Es la unidad de D&D: el alto total (parent + children) se obtiene
   de forma natural con getBoundingClientRect() sobre este elemento. */
.tab-block {
  position: relative;
  display: block;
}

/* BASE STRUCTURE */
.tab.child-tab {

  /* Layout */
  height: 22px;
  padding: 0 11px 0 32px;

  /* Text */
  font-weight: 300;

  /* Visual */
  background: inherit;
  border-left: 4px solid transparent;
  border-bottom: 1px solid var(--vscode-tab-border, #444);
  opacity: 1;

  /* Flexbox */
  display: flex;
  align-items: center;
  position: relative;
  cursor: pointer;
}

/* Interactive States */
.tab.child-tab:hover {
  opacity: 1;
}

.tab.child-tab.active {
  opacity: 1;
  background: var(--vscode-list-activeSelectionBackground, #5a5d5e40);
  border-left: 4px solid var(--vscode-focusBorder, #007acc);
}

.tab.child-tab.active:hover {
  background: var(--vscode-list-activeSelectionBackground, rgba(90,93,94,0.3));
}

/* Spacing */
.tab.child-tab:last-of-type {
  border-bottom: 1px solid var(--vscode-editorGroupHeader-tabsBorder, hsla(0, 0%, 8%, 0.8));
}

/* ICONS */
.tab.child-tab .tab-icon {
  width: 14px;
  min-width: 14px;
  height: 20px;
  margin: 0 6px 0 0;
}

.tab.child-tab .tab-icon .codicon {
  font-size: 14px;
}

.tab.child-tab .tab-icon img {
  width: 14px;
  height: 14px;
}

/* DIFF TYPE COLORS */
/* Working Tree */
.tab.child-tab.diff-working-tree .tab-icon .codicon {
  color: var(--vscode-gitDecoration-modifiedResourceForeground, #e2c08d);
}

/* Staged */
.tab.child-tab.diff-staged .tab-icon .codicon {
  color: var(--vscode-gitDecoration-addedResourceForeground, #73c991);
}

/* Snapshot */
.tab.child-tab.diff-snapshot .tab-icon .codicon {
  color: var(--vscode-charts-purple, #b180d7);
}

/* Commit */
.tab.child-tab.diff-commit .tab-icon .codicon {
  color: var(--vscode-gitDecoration-submoduleResourceForeground, #8db9e2);
}

/* Edit (AI) */
.tab.child-tab.diff-edit .tab-icon .codicon {
  color: var(--vscode-editorWarning-foreground, #ffcc00);
}

/* Merge Conflict */
.tab.child-tab.diff-conflict .tab-icon .codicon {
  color: var(--vscode-gitDecoration-conflictingResourceForeground, #e51400);
}

/* Incoming */
.tab.child-tab.diff-incoming .tab-icon .codicon {
  color: var(--vscode-editorInfo-foreground, #3794ff);
}

/* Current */
.tab.child-tab.diff-current .tab-icon .codicon {
  color: var(--vscode-foreground, #cccccc);
}

/* Incoming-Current */
.tab.child-tab.diff-merge .tab-icon .codicon {
  color: var(--vscode-editorWarning-foreground, #eca700);
}

/* Unknown */
.tab.child-tab.diff-compare .tab-icon .codicon {
  color: var(--vscode-charts-orange, #cccccc80);
}

/* LABELS & STATS */
.child-type-label {
  font-size: 11px;
  font-weight: 500;
  opacity: 0.9;
  flex-shrink: 0;
  margin-right: auto;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 180px;
}

.tab.child-tab.active .child-type-label {
  opacity: 1;
  font-weight: 600;
}

/* Stats */
.child-stats {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 11px;
    opacity: 0.82;
    flex-shrink: 0;
    margin-left: auto;
    font-weight: 500;
}

.stats-added {
  color: var(--vscode-gitDecoration-addedResourceForeground, #73c991);
}

.stats-removed {
  color: var(--vscode-gitDecoration-deletedResourceForeground, #c74e39);
}

.child-stats.conflict {
  color: var(--vscode-gitDecoration-conflictingResourceForeground, #e51400);
}

/* Hide stats on hover to show actions */
.tab.child-tab:hover .child-stats {
  display: none;
}

/* ACTION BUTTONS */
.tab.child-tab .tab-actions {
  display: none;
  align-items: center;
  gap: 2px;
  margin-left: auto;
}

.tab.child-tab:hover .tab-actions {
  display: flex;
}

.tab.child-tab .tab-actions button {
  width: 14px;
  height: 14px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: 3px;
  color: var(--vscode-icon-foreground, var(--vscode-foreground));
  opacity: 0.7;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 150ms ease;
}

.tab.child-tab .tab-actions button:hover {
  opacity: 1;
  background: var(--vscode-toolbar-hoverBackground, rgba(90,93,94,0.2));
}

.tab.child-tab .tab-actions button:active {
  transform: scale(0.95);
}

.tab.child-tab .tab-actions button img {
  width: 11px;
  height: 11px;
  object-fit: contain;
}

/* STATE INDICATORS */
.tab.child-tab .state-indicator-error,
.tab.child-tab .state-indicator-warning,
.tab.child-tab .state-indicator-conflict {
  font-size: 12px;
  margin-right: 4px;
  flex-shrink: 0;
}

.tab.child-tab .state-indicator-error {
  color: var(--vscode-editorError-foreground, #f48771);
}

.tab.child-tab .state-indicator-warning {
  color: var(--vscode-editorWarning-foreground, #cca700);
}

.tab.child-tab .state-indicator-conflict {
  color: var(--vscode-gitDecoration-conflictingResourceForeground, #e51400);
}