/* ===== Reset ===== */
* { margin:0; padding:0; box-sizing:border-box; }
body {
  font-family : var(--vscode-font-family);
  font-size   : var(--vscode-font-size);
  color       : var(--vscode-foreground);
  background  : var(--vscode-sideBar-background, var(--vscode-editor-background));
  overflow-x  : hidden;
  user-select : none;
  border-top  : 1px solid var(--vscode-editorGroupHeader-tabsBorder, var(--vscode-panel-border, rgba(128,128,128,0.35)));
}

/* ===== Group header ===== */
.group-header {
  display        : flex;
  align-items    : center;
  gap            : 5px;
  padding        : 3px 10px;
  font-size      : 10px;
  font-weight    : 600;
  text-transform : uppercase;
  letter-spacing : 0.5px;
  opacity        : 0.7;
  color          : var(--vscode-sideBarSectionHeader-foreground, var(--vscode-foreground));
  background     : var(--vscode-sideBarSectionHeader-background, transparent);
}

/* ===== Tab row ===== */
.tab {
  display       : flex;
  align-items   : center;
  height        : 42px;
  padding       : 0 8px 0 0;
  cursor        : pointer;
  position      : relative;
  border-left   : 5px solid transparent;
  border-bottom : 1px solid var(--vscode-editorGroupHeader-tabsBorder, var(--vscode-panel-border, rgba(128,128,128,0.35)));
  transition    : background 80ms ease, transform 200ms cubic-bezier(0.4, 0, 0.2, 1), opacity 200ms ease;
}
.tab:hover,
.tab:active {
  background : var(--vscode-list-hoverBackground);
}
.tab.active {
  border-left-color : var(--vscode-focusBorder, var(--vscode-activityBar-activeBorder, #007acc));
  background        : var(--vscode-list-activeSelectionBackground);
  color             : var(--vscode-list-activeSelectionForeground, var(--vscode-foreground));
}

/* ===== Drag & Drop States ===== */

/* Tab siendo arrastrada: se eleva visualmente y se mueve con el cursor */
.tab.drag-clone {
  position         : fixed;
  z-index          : 1000;
  pointer-events   : none;
  opacity          : 0.92;
  box-shadow       : 0 4px 16px rgba(0,0,0,0.35);
  border-radius    : 4px;
  background       : var(--vscode-list-activeSelectionBackground, var(--vscode-sideBar-background));
  border-left      : 5px solid var(--vscode-focusBorder, #007acc);
  will-change      : transform;
  transition       : none;
}

/* Placeholder invisible: ocupa el espacio original de la tab arrastrada */
.tab.drag-placeholder {
  opacity          : 0;
  pointer-events   : none;
}

/* Las demás tabs se desplazan suavemente cuando se reordenan */
.tab.drag-shifting {
  transition       : transform 200ms cubic-bezier(0.25, 0.1, 0.25, 1);
  pointer-events   : none;
}

/* Body durante el drag: deshabilita selección de texto */
body.drag-active {
  user-select : none;
  cursor      : default;
}

/* During drag, make pinned tabs completely non-interactive */
body.drag-active .tab[data-pinned="true"] {
  pointer-events : none;
}

/* Animación de cierre suave */
.tab.closing {
  animation: slideOut 200ms cubic-bezier(0.4, 0, 1, 1) forwards;
}

@keyframes slideOut {
  0% {
    opacity: 1;
    transform: translateX(0);
    max-height: 42px;
  }
  50% {
    opacity: 0;
    transform: translateX(-20px);
  }
  100% {
    opacity: 0;
    transform: translateX(-20px);
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
    margin-top: 0;
    margin-bottom: 0;
  }
}

/* Icon area — fixed width to prevent shifts */
.tab-icon {
  flex            : 0 0 28px;
  display         : flex;
  align-items     : center;
  justify-content : center;
  margin          : 0 8px;
}

.tab-icon img {
  width      : 18px;
  height     : 18px;
  object-fit : contain;
}

/* Text block (name + path stacked) */
.tab-text {
  flex            : 1 1 auto;
  min-width       : 0;
  display         : flex;
  flex-direction  : column;
  justify-content : center;
  line-height     : 1.3;
  overflow        : hidden;
}

.tab-name {
  white-space   : nowrap;
  overflow      : hidden;
  text-overflow : ellipsis;
  font-size     : 13px;
}

/* File state colors — specificity beats inherited color from .tab.active */
.tab .tab-name.modified,
.tab.active .tab-name.modified {
  color: var(--vscode-gitDecoration-modifiedResourceForeground, #e2c08d);
}
.tab .tab-name.added,
.tab.active .tab-name.added {
  color: var(--vscode-gitDecoration-addedResourceForeground, #73c991);
}
.tab .tab-name.deleted,
.tab.active .tab-name.deleted {
  color: var(--vscode-gitDecoration-deletedResourceForeground, #c74e39);
}
.tab .tab-name.untracked,
.tab.active .tab-name.untracked {
  color: var(--vscode-gitDecoration-untrackedResourceForeground, #73c991);
}
.tab .tab-name.ignored,
.tab.active .tab-name.ignored {
  color: var(--vscode-gitDecoration-ignoredResourceForeground, #8c8c8c);
}
.tab .tab-name.conflict,
.tab.active .tab-name.conflict {
  color: var(--vscode-gitDecoration-conflictingResourceForeground, #e51400);
}
.tab .tab-name.warning,
.tab.active .tab-name.warning {
  color: var(--vscode-editorWarning-foreground, #cca700);
}
.tab .tab-name.error,
.tab.active .tab-name.error {
  color: var(--vscode-editorError-foreground, #f48771);
}
.tab-path {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 11px;
  opacity: 0.6;
  margin-top: 1px;
}

/* State indicator — sits at the right edge, colored per state */
.tab-state {
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  font-size: 14px;
}
.tab-state.state-modified  { color: var(--vscode-gitDecoration-modifiedResourceForeground, #e2c08d); }
.tab-state.state-added     { color: var(--vscode-gitDecoration-addedResourceForeground, #73c991); }
.tab-state.state-deleted   { color: var(--vscode-gitDecoration-deletedResourceForeground, #c74e39); }
.tab-state.state-untracked { color: var(--vscode-gitDecoration-untrackedResourceForeground, #73c991); }
.tab-state.state-ignored   { color: var(--vscode-gitDecoration-ignoredResourceForeground, #8c8c8c); }
.tab-state.state-conflict  { color: var(--vscode-gitDecoration-conflictingResourceForeground, #e51400); }
.tab-state.state-warning   { color: var(--vscode-editorWarning-foreground, #cca700); }
.tab-state.state-error     { color: var(--vscode-editorError-foreground, #f48771); }
.tab-state.state-dirty     { color: var(--vscode-gitDecoration-modifiedResourceForeground, #e2c08d); }
/* Hide state indicator on hover (replaced by action buttons) */
.tab:hover .tab-state { display: none; }
/* When clean and not hovered, keep placeholder width */
.tab-state.clean { visibility: hidden; }

/* ===== Action buttons ===== */
.tab-actions {
  flex        : 0 0 auto;
  display     : none; /* hidden by default */
  align-items : center;
  gap         : 3px;
}
.tab:hover .tab-actions { display: flex; }

.tab-actions button {
  background      : transparent;
  border          : none;
  color           : var(--vscode-icon-foreground, var(--vscode-foreground));
  cursor          : pointer;
  width           : 20px;
  height          : 20px;
  border-radius   : 4px;
  display         : flex;
  align-items     : center;
  justify-content : center;
  font-size       : 12px;
  padding         : 0;
  line-height     : 1;
}
.tab-actions button:hover {
  background: var(--vscode-toolbar-hoverBackground, rgba(90,93,94,0.31));
}

/* Pinned indicator on the name */
.tab-name .pin-badge {
  font-size   : 13px;
  margin-left : 4px;
  opacity     : 0.7;
}

/* Codicon support */
.codicon {
  font-size: 16px;
}

/* ===== Empty state ===== */
.empty {
  padding: 16px;
  text-align: center;
  opacity: 0.6;
  font-size: 12px;
}
